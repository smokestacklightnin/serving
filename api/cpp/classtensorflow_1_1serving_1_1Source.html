<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TensorFlow Serving C++ API Documentation: tensorflow::serving::Source&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TensorFlow Serving C++ API Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>tensorflow</b></li><li class="navelem"><b>serving</b></li><li class="navelem"><a class="el" href="classtensorflow_1_1serving_1_1Source.html">Source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtensorflow_1_1serving_1_1Source-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tensorflow::serving::Source&lt; T &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="source_8h_source.html">source.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tensorflow::serving::Source&lt; T &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classtensorflow_1_1serving_1_1Source__inherit__graph.png" border="0" usemap="#atensorflow_1_1serving_1_1Source_3_01T_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="atensorflow_1_1serving_1_1Source_3_01T_01_4_inherit__map" id="atensorflow_1_1serving_1_1Source_3_01T_01_4_inherit__map">
<area shape="rect" title=" " alt="" coords="24,5,169,47"/>
<area shape="rect" href="classtensorflow_1_1serving_1_1SourceAdapter.html" title=" " alt="" coords="7,95,186,136"/>
<area shape="rect" href="classtensorflow_1_1serving_1_1internal_1_1IdentitySourceAdapter.html" title=" " alt="" coords="5,184,188,240"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aeb281087e1478b0ff4a74e3f60496c6f"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtensorflow_1_1serving_1_1Source.html#aeb281087e1478b0ff4a74e3f60496c6f">AspiredVersionsCallback</a> = std::function&lt; void(const StringPiece servable_name, std::vector&lt; <a class="el" href="classtensorflow_1_1serving_1_1ServableData.html">ServableData</a>&lt; T &gt; &gt; versions)&gt;</td></tr>
<tr class="separator:aeb281087e1478b0ff4a74e3f60496c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a70d7f3b3ab429deb777d4672c0cec447"><td class="memItemLeft" align="right" valign="top"><a id="a70d7f3b3ab429deb777d4672c0cec447"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtensorflow_1_1serving_1_1Source.html#a70d7f3b3ab429deb777d4672c0cec447">SetAspiredVersionsCallback</a> (<a class="el" href="classtensorflow_1_1serving_1_1Source.html#aeb281087e1478b0ff4a74e3f60496c6f">AspiredVersionsCallback</a> callback)=0</td></tr>
<tr class="memdesc:a70d7f3b3ab429deb777d4672c0cec447"><td class="mdescLeft">&#160;</td><td class="mdescRight">Supplies an AspiredVersionsCallback to use. Can be called at most once. <br /></td></tr>
<tr class="separator:a70d7f3b3ab429deb777d4672c0cec447"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class tensorflow::serving::Source&lt; T &gt;</h3>

<p>An abstraction for a module that sources servables to load, or, more precisely, handles to data that can be used to load those servables. Examples of such data handles are:</p><ul>
<li>a file-system path to a serialized vocabulary map</li>
<li>a handle to an incoming RPC that specifies a machine-learned model to load</li>
<li>a <a class="el" href="classtensorflow_1_1serving_1_1Loader.html">Loader</a> (see <a class="el" href="loader_8h_source.html">loader.h</a>) The data handles are generally assumed to be small.</li>
</ul>
<p>A <a class="el" href="classtensorflow_1_1serving_1_1Source.html">Source</a> monitors some external resource (e.g. file system, RPC calls) to find out about new servables and/or new versions of servables and/or the need to unload servable versions. It uses the provided callback to instruct a <a class="el" href="classtensorflow_1_1serving_1_1Target.html">Target</a> module (e.g. <a class="el" href="classtensorflow_1_1serving_1_1AspiredVersionsManager.html">AspiredVersionsManager</a>) which version(s) of a given servable to load. Furthermore, depending on the semantics of the <a class="el" href="classtensorflow_1_1serving_1_1Target.html">Target</a> module, the <a class="el" href="classtensorflow_1_1serving_1_1Source.html">Source</a> implicitly instructs it which ones to unload by omitting those servables.</p>
<p>A common case is that a <a class="el" href="classtensorflow_1_1serving_1_1Source.html">Source</a> emits versions for exactly one servable. An even simpler case is that a servable has a single, static version for the lifetime of the server.</p>
<p>Sources can house state that is shared among multiple emitted servables, e.g.</p><ol type="1">
<li>A shared thread pool or other resource that multiple servables use.</li>
<li>A shared read-only data structure that multiple servables use, to avoid the time and space overhead of replicating the data structure in each servable instance. Shared state whose initialization time and size is negligible (e.g. thread pools) can be created eagerly by the source, which then embeds a pointer to it in each emitted <a class="el" href="classtensorflow_1_1serving_1_1ServableData.html">ServableData</a> item. Creation of expensive or large shared state should be deferred to the first applicable <a class="el" href="classtensorflow_1_1serving_1_1Loader.html#a7dadc89ccbf488aae0102368261cc692">Loader::Load()</a> call, i.e. governed by the manager. Symmetrically, the <a class="el" href="classtensorflow_1_1serving_1_1Loader.html#addca8f4264380e5e635bbe1197f5347f">Loader::Unload()</a> call to the final servable using the expensive/large shared state should tear it down. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="source_8h_source.html#l00065">65</a> of file <a class="el" href="source_8h_source.html">source.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aeb281087e1478b0ff4a74e3f60496c6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb281087e1478b0ff4a74e3f60496c6f">&#9670;&nbsp;</a></span>AspiredVersionsCallback</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classtensorflow_1_1serving_1_1Source.html">tensorflow::serving::Source</a>&lt; T &gt;::<a class="el" href="classtensorflow_1_1serving_1_1Source.html#aeb281087e1478b0ff4a74e3f60496c6f">AspiredVersionsCallback</a> =  std::function&lt;void( const StringPiece servable_name, std::vector&lt;<a class="el" href="classtensorflow_1_1serving_1_1ServableData.html">ServableData</a>&lt;T&gt; &gt; versions)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A callback for a <a class="el" href="classtensorflow_1_1serving_1_1Source.html">Source</a> to supply version(s) of a servable to a <a class="el" href="classtensorflow_1_1serving_1_1Target.html">Target</a>, to be loaded.</p>
<p>A single invocation of the callback pertains to a single servable stream (given by 'servable_name'). All versions supplied in a call must be for the servable identified in 'servable_name'. Invocations on different servable streams are orthogonal to one another.</p>
<p>Multiple invocations may supply servable-data objects with identical ids (i.e. same servable name and version). Such servable-data objects are treated as semantically equivalent. The recipient will ultimately retain one and discard the rest.</p>
<p>If a servable version V is supplied in a first invocation, and subsequently omitted from a second invocation, the implication of omitting V depends on the semantics of the <a class="el" href="classtensorflow_1_1serving_1_1Target.html">Target</a> of the callback. Certain Targets will interpret V's omission as an implicit instruction to unload V. Each <a class="el" href="classtensorflow_1_1serving_1_1Target.html">Target</a> must document its semantics in this regard. </p>

<p class="definition">Definition at line <a class="el" href="source_8h_source.html#l00087">87</a> of file <a class="el" href="source_8h_source.html">source.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>tensorflow_serving/core/<a class="el" href="source_8h_source.html">source.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
