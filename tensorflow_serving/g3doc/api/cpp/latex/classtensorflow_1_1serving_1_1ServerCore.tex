\hypertarget{classtensorflow_1_1serving_1_1ServerCore}{}\doxysection{tensorflow\+::serving\+::Server\+Core Class Reference}
\label{classtensorflow_1_1serving_1_1ServerCore}\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}


{\ttfamily \#include $<$server\+\_\+core.\+h$>$}



Inheritance diagram for tensorflow\+::serving\+::Server\+Core\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classtensorflow_1_1serving_1_1ServerCore__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for tensorflow\+::serving\+::Server\+Core\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=189pt]{classtensorflow_1_1serving_1_1ServerCore__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServerCore_1_1Options}{Options}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServerCore_1_1Options}{Options}} for configuring a \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_adc911d936d998cde571247e65bf79e27}\label{classtensorflow_1_1serving_1_1ServerCore_adc911d936d998cde571247e65bf79e27}} 
using {\bfseries Pre\+Load\+Hook} = Aspired\+Versions\+Manager\+::\+Pre\+Load\+Hook
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a575a761b6ad37bbae6230cfb6e2b3df9}\label{classtensorflow_1_1serving_1_1ServerCore_a575a761b6ad37bbae6230cfb6e2b3df9}} 
using {\bfseries Servable\+State\+Monitor\+Creator} = std\+::function$<$ Status(\mbox{\hyperlink{classtensorflow_1_1serving_1_1EventBus}{Event\+Bus}}$<$ \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableState}{Servable\+State}} $>$ $\ast$event\+\_\+bus, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableStateMonitor}{Servable\+State\+Monitor}} $>$ $\ast$monitor)$>$
\item 
using \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_aded4a259be715e96c76f6d239ea68a80}{Custom\+Model\+Config\+Loader}} = std\+::function$<$ Status(const \+::google\+::protobuf\+::\+Any \&any, \mbox{\hyperlink{classtensorflow_1_1serving_1_1EventBus}{Event\+Bus}}$<$ \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableState}{Servable\+State}} $>$ $\ast$event\+\_\+bus, \mbox{\hyperlink{classtensorflow_1_1serving_1_1UniquePtrWithDeps}{Unique\+Ptr\+With\+Deps}}$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1AspiredVersionsManager}{Aspired\+Versions\+Manager}} $>$ $\ast$manager)$>$
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a1112df0a65160902633dcc7590aa5a7c}\label{classtensorflow_1_1serving_1_1ServerCore_a1112df0a65160902633dcc7590aa5a7c}} 
using \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_a1112df0a65160902633dcc7590aa5a7c}{Server\+Request\+Logger\+Updater}} = std\+::function$<$ Status(const Model\+Server\+Config \&, \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerRequestLogger}{Server\+Request\+Logger}} $\ast$)$>$
\begin{DoxyCompactList}\small\item\em Function signature used to update the server\+\_\+request\+\_\+logger. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableId}{Servable\+Id}} $>$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_ac88da0268e401fa99bcd074e692ee709}{List\+Available\+Servable\+Ids}} () const override
\item 
virtual Status \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_ac3fbf30a022d978159532c2c68384669}{Reload\+Config}} (const Model\+Server\+Config \&config) TF\+\_\+\+LOCKS\+\_\+\+EXCLUDED(config\+\_\+mu\+\_\+)
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_ac435225d6ad57889e29d524b32b84c46}\label{classtensorflow_1_1serving_1_1ServerCore_ac435225d6ad57889e29d524b32b84c46}} 
virtual \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableStateMonitor}{Servable\+State\+Monitor}} $\ast$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_ac435225d6ad57889e29d524b32b84c46}{servable\+\_\+state\+\_\+monitor}} () const
\begin{DoxyCompactList}\small\item\em Returns \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableStateMonitor}{Servable\+State\+Monitor}} that can be used to query servable states. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\Status \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_adbe7fed540950b47bf889d3414239dbf}{Get\+Servable\+Handle}} (const Model\+Spec \&model\+\_\+spec, \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableHandle}{Servable\+Handle}}$<$ T $>$ $\ast$const handle)
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a45edb843833ce1749ec31b85c720a2fb}\label{classtensorflow_1_1serving_1_1ServerCore_a45edb843833ce1749ec31b85c720a2fb}} 
virtual Status {\bfseries Get\+Servable\+Handle} (const Model\+Spec \&model\+\_\+spec, \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableHandle}{Servable\+Handle}}$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1Servable}{Servable}} $>$ $\ast$const handle)
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a465cb07e1990fdd55f6fff9e94edd438}\label{classtensorflow_1_1serving_1_1ServerCore_a465cb07e1990fdd55f6fff9e94edd438}} 
{\footnotesize template$<$typename T $>$ }\\std\+::map$<$ \mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableId}{Servable\+Id}}, \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableHandle}{Servable\+Handle}}$<$ T $>$ $>$ {\bfseries Get\+Available\+Servable\+Handles} () const
\item 
virtual Status \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_a7eec47dca427a8fcf5e345572bf818e4}{Log}} (const google\+::protobuf\+::\+Message \&request, const google\+::protobuf\+::\+Message \&response, const Log\+Metadata \&log\+\_\+metadata)
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a7117d3815ed866ba365f6965986aa946}\label{classtensorflow_1_1serving_1_1ServerCore_a7117d3815ed866ba365f6965986aa946}} 
{\footnotesize template$<$typename Request , typename Response $>$ }\\std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1StreamLogger}{Stream\+Logger}}$<$ Request, Response $>$ $>$ {\bfseries Start\+Logging\+Stream} (const Log\+Metadata \&log\+\_\+metadata, Server\+Request\+Logger\+::\+Create\+Stream\+Logger\+Fn$<$ Request, Response $>$ create\+\_\+stream\+\_\+logger\+\_\+fn)
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_ad18258c28bba9e3b6dc4f90d061bf78e}\label{classtensorflow_1_1serving_1_1ServerCore_ad18258c28bba9e3b6dc4f90d061bf78e}} 
internal\+::\+Predict\+Response\+Tensor\+Serialization\+Option {\bfseries predict\+\_\+response\+\_\+tensor\+\_\+serialization\+\_\+option} () const
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a05a1bde7b9c8bcb8800fd4917c9232f4}\label{classtensorflow_1_1serving_1_1ServerCore_a05a1bde7b9c8bcb8800fd4917c9232f4}} 
bool {\bfseries enable\+\_\+cors\+\_\+support} () const
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static Status \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_a538a0253233bd77da1051a985e3c2642}{Create}} (\mbox{\hyperlink{structtensorflow_1_1serving_1_1ServerCore_1_1Options}{Options}} options, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} $>$ $\ast$core)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_ab86e66bc7a17c1c836b45b1878b19d4e}\label{classtensorflow_1_1serving_1_1ServerCore_ab86e66bc7a17c1c836b45b1878b19d4e}} 
{\bfseries Server\+Core} (\mbox{\hyperlink{structtensorflow_1_1serving_1_1ServerCore_1_1Options}{Options}} options)
\end{DoxyCompactItemize}
\doxysubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a608b87376662e2a6459a4078681313a6}\label{classtensorflow_1_1serving_1_1ServerCore_a608b87376662e2a6459a4078681313a6}} 
class {\bfseries test\+\_\+util\+::\+Server\+Core\+Test\+Access}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} contains state and helper methods enabling the building of Model\+Servers that support multiple interfaces. All functionality in \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} is independent of any domain specific APIs and independent of platforms.

In terms of state, \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} is initialized with and retains a static Model\+Server\+Config, from which it bootstraps an \mbox{\hyperlink{classtensorflow_1_1serving_1_1AspiredVersionsManager}{Aspired\+Versions\+Manager}} and auxiliary data structures to support efficient serving.

Interfaces built above \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}}, e.\+g. RPC service implementations, will remain stateless and will perform all lookups of servables (models) via \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}}. 

\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_aded4a259be715e96c76f6d239ea68a80}\label{classtensorflow_1_1serving_1_1ServerCore_aded4a259be715e96c76f6d239ea68a80}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!CustomModelConfigLoader@{CustomModelConfigLoader}}
\index{CustomModelConfigLoader@{CustomModelConfigLoader}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{CustomModelConfigLoader}{CustomModelConfigLoader}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_aded4a259be715e96c76f6d239ea68a80}{tensorflow\+::serving\+::\+Server\+Core\+::\+Custom\+Model\+Config\+Loader}} =  std\+::function$<$Status( const \+::google\+::protobuf\+::\+Any\& any, \mbox{\hyperlink{classtensorflow_1_1serving_1_1EventBus}{Event\+Bus}}$<$\mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableState}{Servable\+State}}$>$$\ast$ event\+\_\+bus, \mbox{\hyperlink{classtensorflow_1_1serving_1_1UniquePtrWithDeps}{Unique\+Ptr\+With\+Deps}}$<$\mbox{\hyperlink{classtensorflow_1_1serving_1_1AspiredVersionsManager}{Aspired\+Versions\+Manager}}$>$$\ast$ manager)$>$}

A function that\textquotesingle{}s responsible for instantiating and connecting the necessary custom sources and source adapters to the manager based on a passed in config (any). The expected pattern is that ownership of the created sources/source adapters can be transferred to the manager. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a538a0253233bd77da1051a985e3c2642}\label{classtensorflow_1_1serving_1_1ServerCore_a538a0253233bd77da1051a985e3c2642}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!Create@{Create}}
\index{Create@{Create}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{Create()}{Create()}}
{\footnotesize\ttfamily Status tensorflow\+::serving\+::\+Server\+Core\+::\+Create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structtensorflow_1_1serving_1_1ServerCore_1_1Options}{Options}}}]{options,  }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} $>$ $\ast$}]{core }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Creates a \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore}{Server\+Core}} instance with all the models and sources per the Model\+Server\+Config.

For models statically configured with Model\+Config\+List, waits for them to be made available (or hit an error) for serving before returning. Returns an error status if any such model fails to load. \mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_adbe7fed540950b47bf889d3414239dbf}\label{classtensorflow_1_1serving_1_1ServerCore_adbe7fed540950b47bf889d3414239dbf}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!GetServableHandle@{GetServableHandle}}
\index{GetServableHandle@{GetServableHandle}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{GetServableHandle()}{GetServableHandle()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
Status tensorflow\+::serving\+::\+Server\+Core\+::\+Get\+Servable\+Handle (\begin{DoxyParamCaption}\item[{const Model\+Spec \&}]{model\+\_\+spec,  }\item[{\mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableHandle}{Servable\+Handle}}$<$ T $>$ $\ast$const}]{handle }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns a \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServableHandle}{Servable\+Handle}} given a Model\+Spec. Returns error if no such \mbox{\hyperlink{classtensorflow_1_1serving_1_1Servable}{Servable}} is available -- e.\+g. not yet loaded, has been quiesced/unloaded, etc. Callers may assume that an OK status indicates a non-\/null handle.

IMPORTANT\+: The caller should only hold on to a handle for a short time, for example for the duration of a single request. Holding a handle for a long period of time will prevent servable loading and unloading.

If \textquotesingle{}options\+\_\+.\+allow\+\_\+version\+\_\+labels==true\textquotesingle{}, recognizes two specific model version labels -- \char`\"{}stable\char`\"{} and \char`\"{}canary\char`\"{} -- and resolves them to the smallest and largest available version, respectively. \mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_ac88da0268e401fa99bcd074e692ee709}\label{classtensorflow_1_1serving_1_1ServerCore_ac88da0268e401fa99bcd074e692ee709}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!ListAvailableServableIds@{ListAvailableServableIds}}
\index{ListAvailableServableIds@{ListAvailableServableIds}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{ListAvailableServableIds()}{ListAvailableServableIds()}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structtensorflow_1_1serving_1_1ServableId}{Servable\+Id}}$>$ tensorflow\+::serving\+::\+Server\+Core\+::\+List\+Available\+Servable\+Ids (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Gets a list of all available servable ids, i.\+e. each of these can be retrieved using Get\+Servable\+Handle. 

Implements \mbox{\hyperlink{classtensorflow_1_1serving_1_1Manager_a10694eb8c3e845e4738788092057b7ef}{tensorflow\+::serving\+::\+Manager}}.

\mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_a7eec47dca427a8fcf5e345572bf818e4}\label{classtensorflow_1_1serving_1_1ServerCore_a7eec47dca427a8fcf5e345572bf818e4}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!Log@{Log}}
\index{Log@{Log}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{Log()}{Log()}}
{\footnotesize\ttfamily virtual Status tensorflow\+::serving\+::\+Server\+Core\+::\+Log (\begin{DoxyParamCaption}\item[{const google\+::protobuf\+::\+Message \&}]{request,  }\item[{const google\+::protobuf\+::\+Message \&}]{response,  }\item[{const Log\+Metadata \&}]{log\+\_\+metadata }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Writes the log for the particular request, response and metadata, if we decide to sample it and if request-\/logging was configured for the particular model. \mbox{\Hypertarget{classtensorflow_1_1serving_1_1ServerCore_ac3fbf30a022d978159532c2c68384669}\label{classtensorflow_1_1serving_1_1ServerCore_ac3fbf30a022d978159532c2c68384669}} 
\index{tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}!ReloadConfig@{ReloadConfig}}
\index{ReloadConfig@{ReloadConfig}!tensorflow::serving::ServerCore@{tensorflow::serving::ServerCore}}
\doxysubsubsection{\texorpdfstring{ReloadConfig()}{ReloadConfig()}}
{\footnotesize\ttfamily Status tensorflow\+::serving\+::\+Server\+Core\+::\+Reload\+Config (\begin{DoxyParamCaption}\item[{const Model\+Server\+Config \&}]{config }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Updates the server core with all the models and sources per the Model\+Server\+Config. Like \mbox{\hyperlink{classtensorflow_1_1serving_1_1ServerCore_a538a0253233bd77da1051a985e3c2642}{Create()}}, waits for all statically configured servables to be made available before returning, and returns an error if any such model fails to load. (Does not necessarily wait for models removed from the config to finish unloading; that may occur asynchronously.)

IMPORTANT\+: It is only legal to call this method more than once if using Model\+Config\+List (versus custom model config). 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
tensorflow\+\_\+serving/model\+\_\+servers/server\+\_\+core.\+h\item 
tensorflow\+\_\+serving/model\+\_\+servers/server\+\_\+core.\+cc\end{DoxyCompactItemize}
