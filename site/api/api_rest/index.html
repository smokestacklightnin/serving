
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../tutorials/tensorboard/">
      
      
        <link rel="next" href="../tensorflow_serving/">
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Client API (REST) - Serving</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#restful-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Serving" class="md-header__button md-logo" aria-label="Serving" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Serving
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Client API (REST)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tensorflow/serving" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Serving Models
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Serving" class="md-nav__button md-logo" aria-label="Serving" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Serving
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tensorflow/serving" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Serving Models
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serving Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TensorFlow Serving with Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/serving_basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serving a TensorFlow Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/serving_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tensorflow Serving Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/serving_advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Standard TensorFlow ModelServer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/serving_kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use TensorFlow Serving with Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/custom_servable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a new kind of servable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/custom_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a module that discovers new servable paths
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/custom_op/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serving TensorFlow models with custom ops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/signature_defs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SignatureDefs in SavedModel for TensorFlow Serving
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/building_with_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building with docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/saved_model_warmup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SavedModel Warmup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/tensorboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profile Inference Requests with TensorBoard
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Client API (REST)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Client API (REST)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-status-api" class="md-nav__link">
    <span class="md-ellipsis">
      Model status API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model status API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-metadata-api" class="md-nav__link">
    <span class="md-ellipsis">
      Model Metadata API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model Metadata API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_1" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classify-and-regress-api" class="md-nav__link">
    <span class="md-ellipsis">
      Classify and Regress API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classify and Regress API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_2" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-format" class="md-nav__link">
    <span class="md-ellipsis">
      Request format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_2" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predict-api" class="md-nav__link">
    <span class="md-ellipsis">
      Predict API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Predict API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_3" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-format_1" class="md-nav__link">
    <span class="md-ellipsis">
      Request format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-input-tensors-in-row-format" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying input tensors in row format.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-input-tensors-in-column-format" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying input tensors in column format.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_3" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Response format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-of-binary-values" class="md-nav__link">
    <span class="md-ellipsis">
      Output of binary values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      JSON mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#floating-point-precision" class="md-nav__link">
    <span class="md-ellipsis">
      Floating Point Precision
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encoding-binary-values" class="md-nav__link">
    <span class="md-ellipsis">
      Encoding binary values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-conformance" class="md-nav__link">
    <span class="md-ellipsis">
      JSON conformance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-modelserver-with-the-rest-api-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Start ModelServer with the REST API endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-rest-api-calls-to-modelserver" class="md-nav__link">
    <span class="md-ellipsis">
      Make REST API calls to ModelServer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/tensorflow/serving/tree/master/tensorflow_serving/apis" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client API (gRPC)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow_serving/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server API (C++)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-status-api" class="md-nav__link">
    <span class="md-ellipsis">
      Model status API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model status API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-metadata-api" class="md-nav__link">
    <span class="md-ellipsis">
      Model Metadata API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model Metadata API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_1" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classify-and-regress-api" class="md-nav__link">
    <span class="md-ellipsis">
      Classify and Regress API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classify and Regress API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_2" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-format" class="md-nav__link">
    <span class="md-ellipsis">
      Request format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_2" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predict-api" class="md-nav__link">
    <span class="md-ellipsis">
      Predict API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Predict API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url_3" class="md-nav__link">
    <span class="md-ellipsis">
      URL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-format_1" class="md-nav__link">
    <span class="md-ellipsis">
      Request format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-input-tensors-in-row-format" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying input tensors in row format.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-input-tensors-in-column-format" class="md-nav__link">
    <span class="md-ellipsis">
      Specifying input tensors in column format.
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-format_3" class="md-nav__link">
    <span class="md-ellipsis">
      Response format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Response format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-of-binary-values" class="md-nav__link">
    <span class="md-ellipsis">
      Output of binary values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      JSON mapping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#floating-point-precision" class="md-nav__link">
    <span class="md-ellipsis">
      Floating Point Precision
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encoding-binary-values" class="md-nav__link">
    <span class="md-ellipsis">
      Encoding binary values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-conformance" class="md-nav__link">
    <span class="md-ellipsis">
      JSON conformance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-modelserver-with-the-rest-api-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Start ModelServer with the REST API endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-rest-api-calls-to-modelserver" class="md-nav__link">
    <span class="md-ellipsis">
      Make REST API calls to ModelServer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="restful-api">RESTful API<a class="headerlink" href="#restful-api" title="Permanent link">¶</a></h1>
<p>In addition to
<a href="https://github.com/tensorflow/serving/blob/master/tensorflow_serving/apis/prediction_service.proto">gRPC APIs</a>
TensorFlow ModelServer also supports RESTful APIs. This page describes these API
endpoints and an end-to-end <a href="#example">example</a> on usage.</p>
<p>The request and response is a JSON object. The composition of this object
depends on the request type or verb. See the API specific sections below for
details.</p>
<p>In case of error, all APIs will return a JSON object in the response body with
<code>error</code> as key and the error message as the value:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="s2">"error"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">error</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="nx">string</span><span class="o">&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="model-status-api">Model status API<a class="headerlink" href="#model-status-api" title="Permanent link">¶</a></h2>
<p>This API closely follows the
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/model_service.proto#L17"><code>ModelService.GetModelStatus</code></a>
gRPC API. It returns the status of a model in the ModelServer.</p>
<h3 id="url">URL<a class="headerlink" href="#url" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>GET http://host:port/v1/models/${MODEL_NAME}[/versions/${VERSION}|/labels/${LABEL}]
</span></code></pre></div>
<p>Including <code>/versions/${VERSION}</code> or <code>/labels/${LABEL}</code> is optional. If omitted
status for all versions is returned in the response.</p>
<h3 id="response-format">Response format<a class="headerlink" href="#response-format" title="Permanent link">¶</a></h3>
<p>If successful, returns a JSON representation of
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/get_model_status.proto#L64"><code>GetModelStatusResponse</code></a>
protobuf.</p>
<h2 id="model-metadata-api">Model Metadata API<a class="headerlink" href="#model-metadata-api" title="Permanent link">¶</a></h2>
<p>This API closely follows the
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/prediction_service.proto#L29"><code>PredictionService.GetModelMetadata</code></a>
gRPC API. It returns the metadata of a model in the ModelServer.</p>
<h3 id="url_1">URL<a class="headerlink" href="#url_1" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>GET http://host:port/v1/models/${MODEL_NAME}[/versions/${VERSION}|/labels/${LABEL}]/metadata
</span></code></pre></div>
<p>Including <code>/versions/${VERSION}</code> or <code>/labels/${LABEL}</code> is optional. If omitted
the model metadata for the latest version is returned in the response.</p>
<h3 id="response-format_1">Response format<a class="headerlink" href="#response-format_1" title="Permanent link">¶</a></h3>
<p>If successful, returns a JSON representation of
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/get_model_metadata.proto#L23"><code>GetModelMetadataResponse</code></a>
protobuf.</p>
<h2 id="classify-and-regress-api">Classify and Regress API<a class="headerlink" href="#classify-and-regress-api" title="Permanent link">¶</a></h2>
<p>This API closely follows the <code>Classify</code> and <code>Regress</code> methods of
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/prediction_service.proto#L15"><code>PredictionService</code></a>
gRPC API.</p>
<h3 id="url_2">URL<a class="headerlink" href="#url_2" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>POST http://host:port/v1/models/${MODEL_NAME}[/versions/${VERSION}|/labels/${LABEL}]:(classify|regress)
</span></code></pre></div>
<p>Including <code>/versions/${VERSION}</code> or <code>/labels/${LABEL}</code> is optional. If omitted
the latest version is used.</p>
<h3 id="request-format">Request format<a class="headerlink" href="#request-format" title="Permanent link">¶</a></h3>
<p>The request body for the <code>classify</code> and <code>regress</code> APIs must be a JSON object
formatted as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="c1">// Optional: serving signature to use.</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="c1">// If unspecifed default serving signature is used.</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="s2">"signature_name"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="c1">// Optional: Common context shared by all examples.</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span><span class="c1">// Features that appear here MUST NOT appear in examples (below).</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span><span class="s2">"context"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="s2">"&lt;feature_name3&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="s2">"&lt;feature_name4&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">  </span><span class="c1">// List of Example objects</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">  </span><span class="s2">"examples"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">      </span><span class="c1">// Example 1</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">      </span><span class="s2">"&lt;feature_name1&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">      </span><span class="s2">"&lt;feature_name2&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">      </span><span class="p">...</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">      </span><span class="c1">// Example 2</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">      </span><span class="s2">"&lt;feature_name1&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">      </span><span class="s2">"&lt;feature_name2&gt;"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">      </span><span class="p">...</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="p">}</span>
</span></code></pre></div>
<p><code>&lt;value&gt;</code> is a JSON number (whole or decimal), JSON string, or a JSON object
that represents binary data (see the <a href="#encoding-binary-values">Encoding binary values</a>
section below for details). <code>&lt;list&gt;</code> is a list of such values. This
format is similar to gRPC's <code>ClassificationRequest</code> and <code>RegressionRequest</code>
protos. Both versions accept list of
<a href="https://github.com/tensorflow/tensorflow/blob/92e6c3e4f5c1cabfda1e61547a6a1b268ef95fa5/tensorflow/core/example/example.proto#L13"><code>Example</code></a>
objects.</p>
<h3 id="response-format_2">Response format<a class="headerlink" href="#response-format_2" title="Permanent link">¶</a></h3>
<p>A <code>classify</code> request returns a JSON object in the response body, formatted as
follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="s2">"result"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="c1">// List of class label/score pairs for first Example (in request)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="nx">label1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">score1</span><span class="o">&gt;</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="nx">label2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">score2</span><span class="o">&gt;</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">],</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="c1">// List of class label/score pairs for next Example (in request)</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="nx">label1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">score1</span><span class="o">&gt;</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="o">&lt;</span><span class="nx">label2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">score2</span><span class="o">&gt;</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">],</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">}</span>
</span></code></pre></div>
<p><code>&lt;label&gt;</code> is a string (which can be an empty string <code>""</code> if the model does not
have a label associated with the score). <code>&lt;score&gt;</code> is a decimal (floating point)
number.</p>
<p>The <code>regress</code> request returns a JSON object in the response body, formatted as
follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="c1">// One regression value for each example in the request in the same order.</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="s2">"result"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value3</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...]</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">}</span>
</span></code></pre></div>
<p><code>&lt;value&gt;</code> is a decimal number.</p>
<p>Users of gRPC API will notice the similarity of this format with
<code>ClassificationResponse</code> and <code>RegressionResponse</code> protos.</p>
<h2 id="predict-api">Predict API<a class="headerlink" href="#predict-api" title="Permanent link">¶</a></h2>
<p>This API closely follows the
<a href="https://github.com/tensorflow/serving/blob/5369880e9143aa00d586ee536c12b04e945a977c/tensorflow_serving/apis/prediction_service.proto#L23"><code>PredictionService.Predict</code></a>
gRPC API.</p>
<h3 id="url_3">URL<a class="headerlink" href="#url_3" title="Permanent link">¶</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>POST http://host:port/v1/models/${MODEL_NAME}[/versions/${VERSION}|/labels/${LABEL}]:predict
</span></code></pre></div>
<p>Including <code>/versions/${VERSION}</code> or <code>/labels/${LABEL}</code> is optional. If omitted
the latest version is used.</p>
<h3 id="request-format_1">Request format<a class="headerlink" href="#request-format_1" title="Permanent link">¶</a></h3>
<p>The request body for <code>predict</code> API must be JSON object formatted as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="c1">// (Optional) Serving signature to use.</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="c1">// If unspecifed default serving signature is used.</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="s2">"signature_name"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">string</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="c1">// Input Tensors in row ("instances") or columnar ("inputs") format.</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">  </span><span class="c1">// A request can have either of them but NOT both.</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">  </span><span class="s2">"instances"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="p">(</span><span class="nx">nested</span><span class="p">)</span><span class="nx">list</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">-</span><span class="k">of</span><span class="o">-</span><span class="nx">objects</span><span class="o">&gt;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">  </span><span class="s2">"inputs"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="p">(</span><span class="nx">nested</span><span class="p">)</span><span class="nx">list</span><span class="o">&gt;|&lt;</span><span class="nx">object</span><span class="o">&gt;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="specifying-input-tensors-in-row-format">Specifying input tensors in row format.<a class="headerlink" href="#specifying-input-tensors-in-row-format" title="Permanent link">¶</a></h4>
<p>This format is similar to <code>PredictRequest</code> proto of gRPC API and the
<a href="https://cloud.google.com/ml-engine/docs/v1/predict-request">CMLE predict API</a>.
Use this format if all named input tensors have the <strong>same 0-th dimension</strong>. If
they don't, use the columnar format described later below.</p>
<p>In the row format, inputs are keyed to <strong>instances</strong> key in the JSON request.</p>
<p>When there is only one named input, specify the value of <strong>instances</strong> key to be
the value of the input:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="c1">// List of 3 scalar tensors.</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="s2">"instances"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w"> </span><span class="s2">"baz"</span><span class="w"> </span><span class="p">]</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="p">}</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">{</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">  </span><span class="c1">// List of 2 tensors each of [1, 2] shape</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">  </span><span class="s2">"instances"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">[[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">]],</span><span class="w"> </span><span class="p">[[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">]]</span><span class="w"> </span><span class="p">]</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="p">}</span>
</span></code></pre></div>
<p>Tensors are expressed naturally in nested notation since there is no need to
manually flatten the list.</p>
<p>For multiple named inputs, each item is expected to be an object containing
input name/tensor value pair, one for each named input. As an example, the
following is a request with two instances, each with a set of three named input
tensors:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w"> </span><span class="s2">"instances"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">   </span><span class="p">{</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">     </span><span class="s2">"tag"</span><span class="o">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">     </span><span class="s2">"signal"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">     </span><span class="s2">"sensor"</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">]]</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">   </span><span class="p">},</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">   </span><span class="p">{</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">     </span><span class="s2">"tag"</span><span class="o">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">     </span><span class="s2">"signal"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">]],</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">     </span><span class="s2">"sensor"</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">]]</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">   </span><span class="p">}</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w"> </span><span class="p">]</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="p">}</span>
</span></code></pre></div>
<p>Note, each named input ("tag", "signal", "sensor") is implicitly assumed have
same 0-th dimension (<em>two</em> in above example, as there are <em>two</em> objects in the
<em>instances</em> list). If you have named inputs that have different 0-th dimension,
use the columnar format described below.</p>
<h4 id="specifying-input-tensors-in-column-format">Specifying input tensors in column format.<a class="headerlink" href="#specifying-input-tensors-in-column-format" title="Permanent link">¶</a></h4>
<p>Use this format to specify your input tensors, if individual named inputs do not
have the same 0-th dimension or you want a more compact representation. This
format is similar to the <code>inputs</code> field of the gRPC
<a href="https://github.com/tensorflow/serving/blob/a52e8181144a5d6acc96b3d57328c7f49f113ea9/tensorflow_serving/apis/predict.proto#L21"><code>Predict</code></a>
request.</p>
<p>In the columnar format, inputs are keyed to <strong>inputs</strong> key in the JSON request.</p>
<p>The value for <strong>inputs</strong> key can either a single input tensor or a map of input
name to tensors (listed in their natural nested form). Each input can have
arbitrary shape and need not share the/ same 0-th dimension (aka batch size) as
required by the row format described above.</p>
<p>Columnar representation of the previous example is as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w"> </span><span class="s2">"inputs"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">   </span><span class="s2">"tag"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">],</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">   </span><span class="s2">"signal"</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">]],</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">   </span><span class="s2">"sensor"</span><span class="o">:</span><span class="w"> </span><span class="p">[[[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">]],</span><span class="w"> </span><span class="p">[[</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">]]]</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w"> </span><span class="p">}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>Note, <strong>inputs</strong> is a JSON object and not a list like <strong>instances</strong> (used in the
row representation). Also, all the named inputs are specified together, as
opposed to unrolling them into individual rows done in the row format described
previously. This makes the representation compact (but maybe less readable).</p>
<h3 id="response-format_3">Response format<a class="headerlink" href="#response-format_3" title="Permanent link">¶</a></h3>
<p>The <code>predict</code> request returns a JSON object in response body.</p>
<p>A request in <a href="#specifying-input-tensors-in-row-format">row format</a> has response
formatted as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="s2">"predictions"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="p">(</span><span class="nx">nested</span><span class="p">)</span><span class="nx">list</span><span class="o">&gt;|&lt;</span><span class="nx">list</span><span class="o">-</span><span class="k">of</span><span class="o">-</span><span class="nx">objects</span><span class="o">&gt;</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="p">}</span>
</span></code></pre></div>
<p>If the output of the model contains only one named tensor, we omit the name and
<code>predictions</code> key maps to a list of scalar or list values. If the model outputs
multiple named tensors, we output a list of objects instead, similar to the
request in row-format mentioned above.</p>
<p>A request in <a href="#specifying-input-tensors-in-column-format">columnar format</a> has
response formatted as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="s2">"outputs"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;|&lt;</span><span class="p">(</span><span class="nx">nested</span><span class="p">)</span><span class="nx">list</span><span class="o">&gt;|&lt;</span><span class="nx">object</span><span class="o">&gt;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="p">}</span>
</span></code></pre></div>
<p>If the output of the model contains only one named tensor, we omit the name and
<code>outputs</code> key maps to a list of scalar or list values. If the model outputs
multiple named tensors, we output an object instead. Each key of this object
corresponds to a named output tensor. The format is similar to the request in
column format mentioned above.</p>
<h4 id="output-of-binary-values">Output of binary values<a class="headerlink" href="#output-of-binary-values" title="Permanent link">¶</a></h4>
<p>TensorFlow does not distinguish between non-binary and binary strings. All are
<code>DT_STRING</code> type. Named tensors that have <strong><code>_bytes</code></strong> as a suffix in their name
are considered to have binary values. Such values are encoded differently as
described in the <a href="#encoding-binary-values">encoding binary values</a> section
below.</p>
<h2 id="json-mapping">JSON mapping<a class="headerlink" href="#json-mapping" title="Permanent link">¶</a></h2>
<p>The RESTful APIs support a canonical encoding in JSON, making it easier to share
data between systems. For supported types, the encodings are described on a
type-by-type basis in the table below. Types not listed below are implied to be
unsupported.</p>
<table>
<thead>
<tr>
<th><a href="https://www.tensorflow.org/versions/r1.1/programmers_guide/dims_types#data_types">TF Data Type</a></th>
<th><a href="http://json.org/">JSON Value</a></th>
<th>JSON example</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>DT_BOOL</td>
<td>true, false</td>
<td><em>true, false</em></td>
<td></td>
</tr>
<tr>
<td>DT_STRING</td>
<td>string</td>
<td><em>"Hello World!"</em></td>
<td>If <code>DT_STRING</code> represents binary bytes (e.g. serialized image bytes or protobuf), encode these in Base64. See <a href="#encoding-binary-values">Encoding binary values</a> for more info.</td>
</tr>
<tr>
<td>DT_INT8, DT_UINT8, DT_INT16, DT_INT32, DT_UINT32, DT_INT64, DT_UINT64</td>
<td>number</td>
<td><em>1, -10, 0</em></td>
<td>JSON value will be a decimal number.</td>
</tr>
<tr>
<td>DT_FLOAT, DT_DOUBLE</td>
<td>number</td>
<td><em>1.1, -10.0, 0, <code>NaN</code>, <code>Infinity</code></em></td>
<td>JSON value will be a number or one of the special token values - <code>NaN</code>, <code>Infinity</code>, and <code>-Infinity</code>. See <a href="#json-conformance">JSON conformance</a> for more info. Exponent notation is also accepted.</td>
</tr>
</tbody>
</table>
<h2 id="floating-point-precision">Floating Point Precision<a class="headerlink" href="#floating-point-precision" title="Permanent link">¶</a></h2>
<p>JSON has a single number data type. Thus it is possible to provide a value
for an input that results in a loss of precision. For instance, if the
input <code>x</code> is a <code>float</code> data type, and the input <code>{"x": 1435774380}</code> is
sent to the model running on hardware based on the IEEE 754 floating point
standard (e.g. Intel or AMD), then the value will be silently converted by the
underyling hardware to <code>1435774336</code> since <code>1435774380</code> cannot be exactly
represented in a 32-bit floating point number. Typically, the inputs
to serving should be the same distribution as training, so this generally
won't be problematic because the same conversions happened at training time.
However, in case full precision is needed, be sure to use an underlying data
type in your model that can handle the desired precision and/or consider
client-side checking.</p>
<h2 id="encoding-binary-values">Encoding binary values<a class="headerlink" href="#encoding-binary-values" title="Permanent link">¶</a></h2>
<p>JSON uses UTF-8 encoding. If you have input feature or tensor values that need
to be binary (like image bytes), you <em>must</em> Base64 encode the data and
encapsulate it in a JSON object having <code>b64</code> as the key as follows:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">{</span><span class="w"> </span><span class="s2">"b64"</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">base64</span><span class="w"> </span><span class="nx">encoded</span><span class="w"> </span><span class="nx">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div>
<p>You can specify this object as a value for an input feature or tensor. The same
format is used to encode output response as well.</p>
<p>A classification request with <code>image</code> (binary data) and <code>caption</code> features is
shown below:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="s2">"signature_name"</span><span class="o">:</span><span class="w"> </span><span class="s2">"classify_objects"</span><span class="p">,</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="s2">"examples"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">      </span><span class="s2">"image"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"b64"</span><span class="o">:</span><span class="w"> </span><span class="s2">"aW1hZ2UgYnl0ZXM="</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">      </span><span class="s2">"caption"</span><span class="o">:</span><span class="w"> </span><span class="s2">"seaside"</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">      </span><span class="s2">"image"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"b64"</span><span class="o">:</span><span class="w"> </span><span class="s2">"YXdlc29tZSBpbWFnZSBieXRlcw=="</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">      </span><span class="s2">"caption"</span><span class="o">:</span><span class="w"> </span><span class="s2">"mountains"</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="json-conformance">JSON conformance<a class="headerlink" href="#json-conformance" title="Permanent link">¶</a></h2>
<p>Many feature or tensor values are floating point numbers. Apart from finite
values (e.g. 3.14, 1.0 etc.) these can have <code>NaN</code> and non-finite (<code>Infinity</code> and
<code>-Infinity</code>) values. Unfortunately the JSON specification (<a href="https://tools.ietf.org/html/rfc7159">RFC
7159</a>) does <strong>NOT</strong> recognize these values
(though the JavaScript specification does).</p>
<p>The REST API described on this page allows request/response JSON objects to have
such values. This implies that requests like the following one are valid:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="s2">"example"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">      </span><span class="s2">"sensor_readings"</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="nx">Nan</span><span class="p">,</span><span class="w"> </span><span class="kc">Infinity</span><span class="w"> </span><span class="p">]</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">  </span><span class="p">]</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">}</span>
</span></code></pre></div>
<p>A (strict) standards compliant JSON parser will reject this with a parse error
(due to <code>NaN</code> and <code>Infinity</code> tokens mixed with actual numbers). To correctly
handle requests/responses in your code, use a JSON parser that supports these
tokens.</p>
<p><code>NaN</code>, <code>Infinity</code>, <code>-Infinity</code> tokens are recognized by
<a href="https://developers.google.com/protocol-buffers/docs/proto3#json">proto3</a>,
Python <a href="https://docs.python.org/3/library/json.html">JSON</a> module and JavaScript
language.</p>
<h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">¶</a></h2>
<p>We can use the toy
<a href="https://github.com/tensorflow/serving/tree/master/tensorflow_serving/servables/tensorflow/testdata/saved_model_half_plus_three/00000123">half_plus_three</a>
model to see REST APIs in action.</p>
<h3 id="start-modelserver-with-the-rest-api-endpoint">Start ModelServer with the REST API endpoint<a class="headerlink" href="#start-modelserver-with-the-rest-api-endpoint" title="Permanent link">¶</a></h3>
<p>Download the <code>half_plus_three</code> model from
<a href="https://github.com/tensorflow/serving">git repository</a>:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/tfserving
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/tmp/tfserving
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="o">=</span><span class="m">1</span><span class="w"> </span>https://github.com/tensorflow/serving
</span></code></pre></div>
<p>We will use Docker to run the ModelServer. If you want to install ModelServer
natively on your system, follow
<a href="../../guide/setup/">setup instructions</a> to install
instead, and start the ModelServer with <code>--rest_api_port</code> option to export
REST API endpoint (this is not needed when using Docker).</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/tmp/tfserving
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>$<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>tensorflow/serving:latest
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">8501</span>:8501<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span>--mount<span class="w"> </span><span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>,target<span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span>-e<span class="w"> </span><span class="nv">MODEL_BASE_PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/serving/tensorflow_serving/servables/tensorflow/testdata<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span>-e<span class="w"> </span><span class="nv">MODEL_NAME</span><span class="o">=</span>saved_model_half_plus_three<span class="w"> </span>-t<span class="w"> </span>tensorflow/serving:latest
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>...
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>....<span class="w"> </span>Exporting<span class="w"> </span>HTTP/REST<span class="w"> </span>API<span class="w"> </span>at:localhost:8501<span class="w"> </span>...
</span></code></pre></div>
<h3 id="make-rest-api-calls-to-modelserver">Make REST API calls to ModelServer<a class="headerlink" href="#make-rest-api-calls-to-modelserver" title="Permanent link">¶</a></h3>
<p>In a different terminal, use the <code>curl</code> tool to make REST API calls.</p>
<p>Get status of the model as follows:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>$ curl http://localhost:8501/v1/models/saved_model_half_plus_three
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>{
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a> "model_version_status": [
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>  {
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>   "version": "123",
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>   "state": "AVAILABLE",
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>   "status": {
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    "error_code": "OK",
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    "error_message": ""
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>   }
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>  }
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a> ]
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>}
</span></code></pre></div>
<p>A <code>predict</code> call would look as follows:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$<span class="w"> </span>curl<span class="w"> </span>-d<span class="w"> </span><span class="s1">'{"instances": [1.0,2.0,5.0]}'</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8501/v1/models/saved_model_half_plus_three:predict
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="o">{</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="s2">"predictions"</span>:<span class="w"> </span><span class="o">[</span><span class="m">3</span>.5,<span class="w"> </span><span class="m">4</span>.0,<span class="w"> </span><span class="m">5</span>.5<span class="o">]</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="o">}</span>
</span></code></pre></div>
<p>And a <code>regress</code> call looks as follows:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>$<span class="w"> </span>curl<span class="w"> </span>-d<span class="w"> </span><span class="s1">'{"signature_name": "tensorflow/serving/regress", "examples": [{"x": 1.0}, {"x": 2.0}]}'</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8501/v1/models/saved_model_half_plus_three:regress
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="o">{</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="s2">"results"</span>:<span class="w"> </span><span class="o">[</span><span class="m">3</span>.5,<span class="w"> </span><span class="m">4</span>.0<span class="o">]</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="o">}</span>
</span></code></pre></div>
<p>Note, <code>regress</code> is available on a non-default signature name and must be
specified explicitly. An incorrect request URL or body returns an HTTP error
status.</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>$<span class="w"> </span>curl<span class="w"> </span>-i<span class="w"> </span>-d<span class="w"> </span><span class="s1">'{"instances": [1.0,5.0]}'</span><span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8501/v1/models/half:predict
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>HTTP/1.1<span class="w"> </span><span class="m">404</span><span class="w"> </span>Not<span class="w"> </span>Found
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>Content-Type:<span class="w"> </span>application/json
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>Date:<span class="w"> </span>Wed,<span class="w"> </span><span class="m">06</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">2018</span><span class="w"> </span><span class="m">23</span>:20:12<span class="w"> </span>GMT
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>Content-Length:<span class="w"> </span><span class="m">65</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="o">{</span><span class="w"> </span><span class="s2">"error"</span>:<span class="w"> </span><span class="s2">"Servable not found for request: Latest(half)"</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>$
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>